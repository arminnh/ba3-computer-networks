The source IP address of the DHCP packets has Router1's vlan address. This address is also filled in in "Relay agent IP address" in the Bootstrap Protocol part of the packet. The server can know on which network PC3 is located by looking at this address.
