Typically the MSS is announced by each side using the MSS option during the handshake, in which case it is derived from the maximum transmission unit (MTU) size of the data link layer (ETHERNET in this case) of the host. For intermediary hops, TCP uses Path MTU Discovery. TCP always sets the Don't Fragment flag, causing an intermediary router to return an ICMP ``Fragmentation needed'' error message. This message includes the MTU needed for a packet to get through, and TCP will adjust its MSS accordingly.